var VideoRecommendationPlugin=function(n){var i={};function o(e){if(i[e])return i[e].exports;var t=i[e]={i:e,l:!1,exports:{}};return n[e].call(t.exports,t,t.exports,o),t.l=!0,t.exports}return o.m=n,o.c=i,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)o.d(n,i,function(e){return t[e]}.bind(null,i));return n},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="",o(o.s=3)}([function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a={},i=t.env=window.glb&&window.glb.getCurrentEnv&&window.glb.getCurrentEnv()||"local",o=(t.tenant=window.cdaaas&&window.cdaaas.SETTINGS&&window.cdaaas.SETTINGS.SITE_ID||"gshow",t.deviceGroup=window.cdaaas&&window.cdaaas.SETTINGS&&window.cdaaas.SETTINGS.MOBILE_GROUP||"desktop",t.isProd="prod"===i,t.parseMilliseconds=function(e){var t=e/1e3,n=parseInt(t/60,10),i=parseInt(t%60,10);return 1<=n?n+(30<i?1:0)+" min":parseInt(t,10)+" seg"},t.createElement=function(e){var t=document.createElement("div");return t.setAttribute("class",e),t},t.getTemplateType=function(){return window.cdaaas.SETTINGS.TEMPLATE_TYPE});t.getBlockPosition=function(t){if("multicontent"!==o())return null;var e=document.querySelectorAll(".bs-video-block"),n=void 0;return e.forEach(function(e){e.querySelector("bs-player").getAttribute("videoid")==t&&(n=parseInt(e.dataset.blockId))}),n},t.delegate=function(e,t,i,o){var r=function(e,t){return e&&e.classList&&e.classList.contains(t)};a[t+"-"+i]||(a[t+"-"+i]={className:i,cb:o},e.addEventListener(t,function(e){var t=e.target,n=!0;if(!r(t,i))for(;t&&n;)t=t.parentNode,r(t,i)&&(n=!1);r(t,i)&&o(t,e)}))},t.initCircleProgress=function(e){var n=void 0,i=document.getElementById(e),o=i.getContext("2d");o.lineWidth="4",o.strokeStyle="#fff";var r=i.width/2,a=i.height/2;return{start:function(){return new Promise(function(e){var t;o.clearRect(0,0,i.width,i.height),t=0,n=setInterval(function(){t+=1,o.clearRect(0,0,i.width,i.height),o.beginPath(),o.arc(r,a,40,Math.PI/180*270,Math.PI/180*(270+t)),o.stroke(),360<=t&&(clearInterval(n),e())},6e3/360)})},stop:function(){clearInterval(n)}}},t.ajax=function(e){var i=e.url,t=e.method,o=void 0===t?"GET":t,n=e.body,r=void 0===n?null:n;return new Promise(function(e,t){var n=new XMLHttpRequest;n.withCredentials=!0,n.open(o,i),n.onload=function(){200<=n.status&&n.status<300&&e(n.response),t(n.statusText)},n.onerror=function(){return t(n.statusText)},n.send(r)})},t.logging=function(e){for(var t,n=arguments.length,i=Array(1<n?n-1:0),o=1;o<n;o++)i[o-1]=arguments[o];return console[e]||(e="log"),(t=console)[e].apply(t,["[player-plugin-videos-recommendation]"].concat(i))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i,o=n(14),r=(i=o)&&i.__esModule?i:{default:i};var a="flow-videos",s=new r.default;s.setHorizonClient();t.default={sendRecommendationScreenImpression:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[],t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null,n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;s.commonEvent({eventCategory:a,eventAction:"impression",eventLabel:e.toString(),eventValue:t,eventProperty:n.toString()})},sendRecommendationClick:function(e,t,n){s.commonEvent({eventCategory:a,eventAction:"click",eventLabel:e.toString(),eventValue:n,eventProperty:t.toString()})},sendStartAutonext:function(e){s.commonEvent({eventCategory:a,eventAction:"autonext",eventLabel:"1",eventValue:e,eventProperty:null})},sendAdvanceAutonext:function(e){s.commonEvent({eventCategory:a,eventAction:"click",eventLabel:"adiantar autonext",eventValue:e,eventProperty:null})},sendClickCancelAutonext:function(){s.commonEvent({eventCategory:a,eventAction:"click",eventLabel:"cancelar autonext",eventValue:null,eventProperty:null})},CATEGORY:a},e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.PLUGIN_KEYNAME="playerPluginVideosRecommendation",t.PLUGIN_FLOW_NAME="video-recommendation-flow-plugin",t.SEEN_VIDEOS_STORAGE_KEY="seen"},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){return n(4)},e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}}();n(5);var o=n(0),u=l(n(10)),r=l(n(13)),a=l(n(1)),s=n(2),c=l(n(15));function l(e){return e&&e.__esModule?e:{default:e}}var d=Clappr,f=d.Events,p=d.UICorePlugin,v={},h=function(e){function n(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e));return t.core.options.exitFullscreenOnEnd=!1,t.pluginOptions=t.core._options.VideoRecommendationPlugin||{},t.enabled=!1,t.videoId=t.core.options.source,t.shouldInit&&(t.uniqueId=t.core.uniqueId,t.playerElement=t.core.el,t.titleElement=t.pluginOptions.titleElement,t.recommendationHandler=new c.default({endpoint:t.pluginOptions.endpoint||"https://recomendacao.globo.com/v3/globocom/ab/"+o.tenant.toUpperCase()+"-VIDEOS-FLOW-item",videoId:t.videoId}),t.recommendationHandler.onError(function(){(0,o.logging)("warn","Desabilitando plugin."),t.playerElement.classList.remove("video-rec-after-end--enabled"),t.destroy()}),t.mountPluginElement(),t.mountCancelScreen(),t.addClickEvents(),t.enable(),t.addCloseToGlobal()),t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,p),i(n,[{key:"name",get:function(){return s.PLUGIN_FLOW_NAME}},{key:"playback",get:function(){return this.core.getCurrentPlayback()}},{key:"nextVideo",get:function(){return this.videos[0].content}},{key:"circleProgress",get:function(){return this.circleProgressCache||(this.circleProgressCache=(0,o.initCircleProgress)("canvas-"+this.uniqueId)),this.circleProgressCache}},{key:"supportedVersion",get:function(){return{min:"0.4.0"}}},{key:"shouldInit",get:function(){var e=window.cdaaas&&window.cdaaas.SETTINGS&&window.cdaaas.SETTINGS.BRANDED_CONTENT,t=window.cdaaas&&window.cdaaas.SETTINGS&&"g1"===window.cdaaas.SETTINGS.SITE_ID;return!(e&&t)}}]),i(n,[{key:"mountPluginElement",value:function(){this.pluginElement=(0,o.createElement)("video-rec-after-end"),this.pluginElement.innerHTML=this.template(),this.pluginElementTitle=this.pluginElement.getElementsByClassName("video-rec-after-end__screen__title")[0],this.pluginElementBackground=this.pluginElement.getElementsByClassName("video-rec-after-end__screen--next-video")[0],this.playerElement.appendChild(this.pluginElement)}},{key:"mountCancelScreen",value:function(){this.cancelScreen=new r.default(this.playerElement,this.uniqueId,this.videoId),this.cancelScreen.onReplay(this.replayVideo.bind(this)),this.cancelScreen.onClick(this.playVideo.bind(this))}},{key:"addClickEvents",value:function(){var e=this;(0,o.delegate)(this.playerElement,"click","canvas-"+this.uniqueId,function(){a.default.sendAdvanceAutonext(e.nextVideo.video.id),e.circleProgress.stop(),e.playVideo()}.bind(this)),(0,o.delegate)(this.playerElement,"click","btn-cancel-"+this.uniqueId,function(){e.toggleScreen(!1),a.default.sendClickCancelAutonext(),e.circleProgress.stop(),e.recommendationHandler.updateSeenVideos(e.nextVideo.video.id),e.updatePlugin().then(function(){return e.cancelScreen.open()})}.bind(this))}},{key:"bindEvents",value:function(){this.listenTo(this.core.mediaControl,f.MEDIACONTROL_CONTAINERCHANGED,this.onContainerChanged)}},{key:"onContainerChanged",value:function(){if(this.container){this.stopListening(this.container);var e=this.container.playback;e&&this.stopListening(e)}this.container=this.core.getCurrentContainer(),this.listenToOnce(this.container.playback,f.PLAYBACK_PLAY,this.onPlay),this.listenTo(this.container,WP3.Events.WATCH_SESSION_END,this.onEnded),this.listenTo(this.container,f.CONTAINER_DESTROYED,this.onDestroy)}},{key:"onDestroy",value:function(){this.circleProgress&&this.circleProgress.stop()}},{key:"getVideoAlternativeData",value:function(e){var t=e._experiment_properties,n=t.experiment,i=t.alternative,o=t.trackId,r=t.glbExpIdToken,a=t.hsid,s=t.userId,c=e.content.video?e.content.video.id:e.id,l=v[c];return l||(l=new u.default(n),v[c]=l),{abClient:l,alternative:i,testId:o,userId:s,glbExpIdToken:r,hsIdToken:a,videoId:c}}},{key:"buildAndSendVideoConversion",value:function(e){if(e){var t=this.getVideoAlternativeData(e),n=t.abClient,i=t.alternative,o=t.testId,r=t.userId,a=t.hsIdToken,s=t.glbExpIdToken,c=t.videoId,l=e.content.video.url;n.sendConversion(i,o,r,a,s,l,c)}}},{key:"buildAndSendVideoImpression",value:function(e){if(e){var t=this.getVideoAlternativeData(e),n=t.abClient,i=t.alternative,o=t.testId,r=t.userId,a=t.hsIdToken,s=t.glbExpIdToken,c=t.videoId,l=this.playback.video.urlForConsumption;n.sendImpression(i,o,r,a,s,l,c)}}},{key:"onPlay",value:function(){var t=this;if(this.recommendationHandler.updateSeenVideos(this.playback.video.id),this.videos){var e=this.videos.filter(function(e){return e.content.video.id===t.playback.video.id})[0];this.buildAndSendVideoConversion(e)}this.updatePlugin(!0).catch(function(){})}},{key:"playVideo",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:this.nextVideo.video.id,t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:this.nextVideo.title;this.toggleScreen(!1),this.updateTitleElement(t),this.core.load(e),this.playback.play(),this.updatePlugin().catch(function(){})}},{key:"replayVideo",value:function(){this.playback.play()}},{key:"onEnded",value:function(){var e=this;this.videos?(this.toggleScreen(!0),this.buildAndSendVideoImpression(this.videos[0]),this.circleProgress.start().then(function(){a.default.sendStartAutonext(e.nextVideo.video.id),e.circleProgress.stop(),e.playVideo()}),this.recommendationHandler.updateSeenVideos(this.nextVideo.video.id)):this.removePlugin()}},{key:"updatePlugin",value:function(){var t=this,e=0<arguments.length&&void 0!==arguments[0]&&arguments[0];return this.playerElement.classList.add("video-rec-after-end--enabled"),this.toggleScreen(!1),e?this.recommendationHandler.getVideos().then(function(e){e?(t.videos=e,t.cancelScreen.updateVideos(e),t.updateElement()):t.removePlugin()}).catch(function(){return t.removePlugin()}):Promise.resolve()}},{key:"updateElement",value:function(){this.pluginElementBackground.style="background-image: url('"+this.nextVideo.image.sizes.M.url+"')",this.pluginElementTitle.textContent=this.nextVideo.title}},{key:"updateTitleElement",value:function(e){this.titleElement&&(this.titleElement.textContent=e)}},{key:"template",value:function(){return'\n      <div data-track-category="'+a.default.CATEGORY+'"\n        class="video-rec-after-end__screen video-rec-after-end__screen--next-video" style="background-image: url(\'\')">\n        <div class="video-rec-after-end__content">\n          <span class="video-rec-after-end__screen__chapeu">Assista ao próximo</span>\n          <span class="video-rec-after-end__screen__title"></span>\n          <div\n            data-track-action="next-video"\n            data-track-label="click"\n            class="video-rec-after-end__screen__canvas canvas-'+this.uniqueId+'"\n          >\n            <canvas id="canvas-'+this.uniqueId+'"></canvas>\n            <svg class="video-rec-after-end__screen__canvas__play" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">\n            <g fill="none" fill-rule="evenodd">\n              <path d="M0 0h24v24H0z"></path>\n              <path d="M8 6.267c0-.661.468-.931 1.04-.601l9.93 5.733c.573.33.573.871 0 1.202l-9.93 5.733c-.572.33-1.04.06-1.04-.6V6.266z" fill="#FFF"></path>\n            </g></svg>\n          </div>\n          <button\n            data-track-action="cancel-video"\n            data-track-label="click"\n            type="button"\n            class="video-rec-after-end__screen__btn-cancel btn-cancel-'+this.uniqueId+'">\n            Cancelar\n          </button>\n        </div>\n      </div>\n    '}},{key:"toggleScreen",value:function(){var e=!(0<arguments.length&&void 0!==arguments[0])||arguments[0];this.playerElement.classList.toggle("video-rec-after-end--show",e)}},{key:"addCloseToGlobal",value:function(){window.disableRecScreen=this.disableRecScreen.bind(this)}},{key:"disableRecScreen",value:function(){(0,o.logging)("warn","Disabling Rec Screen due to external demand"),this.playerElement.classList.remove("video-rec-after-end--enabled"),this.cancelScreen.close()}},{key:"removePlugin",value:function(){(0,o.logging)("warn","Desabilitando plugin."),this.playerElement.classList.remove("video-rec-after-end--enabled"),this.destroy()}}]),n}();t.default=h,e.exports=t.default},function(e,t,n){var i=n(6);"string"==typeof i&&(i=[[e.i,i,""]]);var o={hmr:!0,transform:void 0};n(8)(i,o);i.locals&&(e.exports=i.locals)},function(e,t,n){(e.exports=n(7)(!1)).push([e.i,'.clappr-player.video-rec-cancel-screen--enabled .poster{-webkit-filter:blur(10px);filter:blur(10px);-webkit-transform:scale(1.1);-ms-transform:scale(1.1);transform:scale(1.1);position:static!important}.video-rec-cancel-screen{width:100%;height:100%;position:absolute;display:none!important;z-index:1000;background-color:transparent;background-position:0 0;background-repeat:no-repeat;background-size:cover;-ms-flex-wrap:wrap;flex-wrap:wrap;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;color:#fff;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;cursor:default}.video-rec-cancel-screen--active{display:-webkit-box!important;display:-ms-flexbox!important;display:flex!important}.video-rec-cancel-screen__title{font-size:14px!important;font-family:opensans-regular!important}@media screen and (min-width:620px){.video-rec-cancel-screen__title{font-size:20px!important;margin-top:5px!important}}.video-rec-cancel-screen__replay{display:-webkit-box;display:-ms-flexbox;display:flex;font:normal 14px/18px opensans-regular!important;letter-spacing:-.3px;text-align:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;z-index:1002;color:#fff;fill:#fff;background-color:transparent;border:0;margin:18px auto 0;padding:8px;outline:0;cursor:pointer}@media screen and (min-width:620px){.video-rec-cancel-screen__replay{margin-top:35px;font:normal 16px/18px opensans-regular!important}}.video-rec-cancel-screen__replay svg{margin-right:6px}.video-rec-cancel-screen__video-list{display:-webkit-box!important;display:-ms-flexbox!important;display:flex!important;-ms-flex-wrap:wrap;flex-wrap:wrap;margin-top:15px!important}@media screen and (min-width:620px){.video-rec-cancel-screen__video-list{max-width:80%;margin-top:25px!important}}.video-rec-cancel-screen__video-list section{-webkit-box-flex:1;-ms-flex:1;flex:1;margin:0 15px!important;display:none!important;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-ms-flex-direction:row;flex-direction:row;cursor:pointer}.video-rec-cancel-screen__video-list section:first-child{display:-webkit-box!important;display:-ms-flexbox!important;display:flex!important;-webkit-box-align:center;-ms-flex-align:center;align-items:center}@media screen and (min-width:620px){.video-rec-cancel-screen__video-list section{display:block!important;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column}.video-rec-cancel-screen__video-list section:first-child{display:block!important}}.video-rec-cancel-screen__video-list section .thumb-container{max-width:35%;height:auto;position:relative;background-color:#333}@media screen and (min-width:620px){.video-rec-cancel-screen__video-list section .thumb-container{max-width:100%}.video-rec-cancel-screen__video-list section .thumb-container__picture{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column}}.video-rec-cancel-screen__video-list section .thumb-container picture img{width:100%}@media screen and (min-width:620px){.video-rec-cancel-screen__video-list section .thumb-container picture img{max-width:100%;height:auto}}.video-rec-cancel-screen__video-list section .thumb-container__duration{right:0;position:absolute;bottom:0;background-color:#000;font-size:12px!important;font-family:opensans-regular!important;padding:2px 5px!important}.video-rec-cancel-screen__video-list section .thumb-container__play{top:30%;left:37%;max-width:25%;position:absolute}.video-rec-cancel-screen__video-list section .info-container{width:100%;text-align:left;font:normal 14px/18px opensans-bold!important;margin-left:10px!important;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center}@media screen and (min-width:620px){.video-rec-cancel-screen__video-list section .info-container{display:block;margin-left:0!important}}.video-rec-cancel-screen__video-list section .info-container__chapeu{display:block;font-family:opensans-regular!important;font-weight:600;-webkit-line-clamp:1;display:-webkit-box;-webkit-box-orient:vertical;overflow:hidden}@media screen and (min-width:620px){.video-rec-cancel-screen__video-list section .info-container__chapeu{margin-top:10px!important;font-size:14px!important}}.video-rec-cancel-screen__video-list section .info-container__title{-webkit-line-clamp:2;display:-webkit-box;overflow:hidden;-webkit-box-orient:vertical}@media screen and (min-width:620px){.video-rec-cancel-screen__video-list section .info-container__title{-webkit-line-clamp:3;margin-top:4px!important;font-size:16px!important;line-height:20px!important}}.clappr-player.video-rec-after-end--enabled .poster__play-wrapper{visibility:hidden!important}.video-rec-after-end{display:none!important;width:100%;height:100%;position:absolute;z-index:1000;background-color:#333}.video-rec-after-end #canvas{width:100%;height:auto}.video-rec-after-end__content{max-width:72%;z-index:1002}.video-rec-after-end__screen{width:100%;height:100%;position:absolute;z-index:1000;background-color:transparent;background-position:0 0;background-repeat:no-repeat;background-size:cover;-ms-flex-wrap:wrap;flex-wrap:wrap;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;color:#fff;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;cursor:pointer}.video-rec-after-end__screen--next-video{display:-webkit-box!important;display:-ms-flexbox!important;display:flex!important}.video-rec-after-end__screen--next-video:after{content:"";width:100%;height:100%;position:absolute;top:0;left:0;z-index:1001;background-color:#000;opacity:.6}.video-rec-after-end__screen__chapeu{display:block;font:normal 14px/19px opensans-regular!important;letter-spacing:-.3px;text-align:center}@media screen and (min-width:620px){.video-rec-after-end__screen__chapeu{font:normal 18px/18px opensans-regular!important}}.video-rec-after-end__screen__title{display:block;font:normal 4.5vw/5.5vw opensans-bold!important;letter-spacing:-.3px;text-align:center;margin-top:2px!important;display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical;overflow:hidden}@media screen and (min-width:620px){.video-rec-after-end__screen__title{font-size:20px!important;line-height:24px!important;margin-top:8px!important;display:block}}.video-rec-after-end__screen__canvas{position:relative;display:-webkit-box!important;display:-ms-flexbox!important;display:flex!important;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;cursor:pointer;margin-top:10px!important;-webkit-transform:scale(.5);-ms-transform:scale(.5);transform:scale(.5);height:12vw}@media screen and (min-width:620px){.video-rec-after-end__screen__canvas{margin-top:30px!important;-webkit-transform:none;-ms-transform:none;transform:none;height:auto;height:70px}}.video-rec-after-end__screen__canvas__play{max-width:40px;position:absolute}.video-rec-after-end__screen__btn-cancel{display:block;font:normal 14px/18px opensans-regular!important;letter-spacing:-.3px;text-align:center;z-index:1002;color:#fff;background-color:transparent;border:0;margin:10px auto 0;cursor:pointer;position:relative;z-index:2}@media screen and (min-width:620px){.video-rec-after-end__screen__btn-cancel{font:normal 16px/18px opensans-regular!important;margin:28px auto 0}}.video-rec-after-end__screen__btn-cancel:active{outline:0}.video-rec-after-end--show .video-rec-after-end{display:-webkit-box!important;display:-ms-flexbox!important;display:flex!important}.video-rec-after-end--show .media-control{display:none}',""])},function(e,t,n){"use strict";e.exports=function(n){var a=[];return a.toString=function(){return this.map(function(e){var t=function(e,t){var n=e[1]||"",i=e[3];if(!i)return n;if(t&&"function"==typeof btoa){var o=(a=i,"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(a))))+" */"),r=i.sources.map(function(e){return"/*# sourceURL="+i.sourceRoot+e+" */"});return[n].concat(r).concat([o]).join("\n")}var a;return[n].join("\n")}(e,n);return e[2]?"@media "+e[2]+"{"+t+"}":t}).join("")},a.i=function(e,t){"string"==typeof e&&(e=[[null,e,""]]);for(var n={},i=0;i<this.length;i++){var o=this[i][0];"number"==typeof o&&(n[o]=!0)}for(i=0;i<e.length;i++){var r=e[i];"number"==typeof r[0]&&n[r[0]]||(t&&!r[2]?r[2]=t:t&&(r[2]="("+r[2]+") and ("+t+")"),a.push(r))}},a}},function(e,t,n){var i,o,r,c={},l=(i=function(){return window&&document&&document.all&&!window.atob},function(){return void 0===o&&(o=i.apply(this,arguments)),o}),a=(r={},function(e){if(void 0===r[e]){var t=function(e){return document.querySelector(e)}.call(this,e);if(t instanceof window.HTMLIFrameElement)try{t=t.contentDocument.head}catch(e){t=null}r[e]=t}return r[e]}),u=null,d=0,s=[],f=n(9);function p(e,t){for(var n=0;n<e.length;n++){var i=e[n],o=c[i.id];if(o){o.refs++;for(var r=0;r<o.parts.length;r++)o.parts[r](i.parts[r]);for(;r<i.parts.length;r++)o.parts.push(y(i.parts[r],t))}else{var a=[];for(r=0;r<i.parts.length;r++)a.push(y(i.parts[r],t));c[i.id]={id:i.id,refs:1,parts:a}}}}function v(e,t){for(var n=[],i={},o=0;o<e.length;o++){var r=e[o],a=t.base?r[0]+t.base:r[0],s={css:r[1],media:r[2],sourceMap:r[3]};i[a]?i[a].parts.push(s):n.push(i[a]={id:a,parts:[s]})}return n}function h(e,t){var n=a(e.insertInto);if(!n)throw new Error("Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.");var i=s[s.length-1];if("top"===e.insertAt)i?i.nextSibling?n.insertBefore(t,i.nextSibling):n.appendChild(t):n.insertBefore(t,n.firstChild),s.push(t);else if("bottom"===e.insertAt)n.appendChild(t);else{if("object"!=typeof e.insertAt||!e.insertAt.before)throw new Error("[Style Loader]\n\n Invalid value for parameter 'insertAt' ('options.insertAt') found.\n Must be 'top', 'bottom', or Object.\n (https://github.com/webpack-contrib/style-loader#insertat)\n");var o=a(e.insertInto+" "+e.insertAt.before);n.insertBefore(t,o)}}function m(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e);var t=s.indexOf(e);0<=t&&s.splice(t,1)}function b(e){var t=document.createElement("style");return e.attrs.type="text/css",g(t,e.attrs),h(e,t),t}function g(t,n){Object.keys(n).forEach(function(e){t.setAttribute(e,n[e])})}function y(t,e){var n,i,o,r,a,s;if(e.transform&&t.css){if(!(r=e.transform(t.css)))return function(){};t.css=r}if(e.singleton){var c=d++;n=u||(u=b(e)),i=w.bind(null,n,c,!1),o=w.bind(null,n,c,!0)}else o=t.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(a=e,s=document.createElement("link"),a.attrs.type="text/css",a.attrs.rel="stylesheet",g(s,a.attrs),h(a,s),i=function(e,t,n){var i=n.css,o=n.sourceMap,r=void 0===t.convertToAbsoluteUrls&&o;(t.convertToAbsoluteUrls||r)&&(i=f(i));o&&(i+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(o))))+" */");var a=new Blob([i],{type:"text/css"}),s=e.href;e.href=URL.createObjectURL(a),s&&URL.revokeObjectURL(s)}.bind(null,n=s,e),function(){m(n),n.href&&URL.revokeObjectURL(n.href)}):(n=b(e),i=function(e,t){var n=t.css,i=t.media;i&&e.setAttribute("media",i);if(e.styleSheet)e.styleSheet.cssText=n;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(n))}}.bind(null,n),function(){m(n)});return i(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap)return;i(t=e)}else o()}}e.exports=function(e,a){if("undefined"!=typeof DEBUG&&DEBUG&&"object"!=typeof document)throw new Error("The style-loader cannot be used in a non-browser environment");(a=a||{}).attrs="object"==typeof a.attrs?a.attrs:{},a.singleton||"boolean"==typeof a.singleton||(a.singleton=l()),a.insertInto||(a.insertInto="head"),a.insertAt||(a.insertAt="bottom");var s=v(e,a);return p(s,a),function(e){for(var t=[],n=0;n<s.length;n++){var i=s[n];(o=c[i.id]).refs--,t.push(o)}e&&p(v(e,a),a);for(n=0;n<t.length;n++){var o;if(0===(o=t[n]).refs){for(var r=0;r<o.parts.length;r++)o.parts[r]();delete c[o.id]}}}};var x,k=(x=[],function(e,t){return x[e]=t,x.filter(Boolean).join("\n")});function w(e,t,n,i){var o=n?"":i.css;if(e.styleSheet)e.styleSheet.cssText=k(t,o);else{var r=document.createTextNode(o),a=e.childNodes;a[t]&&e.removeChild(a[t]),a.length?e.insertBefore(r,a[t]):e.appendChild(r)}}},function(e,t,n){"use strict";e.exports=function(e){var t="undefined"!=typeof window&&window.location;if(!t)throw new Error("fixUrls requires window.location");if(!e||"string"!=typeof e)return e;var o=t.protocol+"//"+t.host,r=o+t.pathname.replace(/\/[^\/]*$/,"/");return e.replace(/url\s*\(((?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)\)/gi,function(e,t){var n,i=t.trim().replace(/^"(.*)"$/,function(e,t){return t}).replace(/^'(.*)'$/,function(e,t){return t});return/^(#|data:|http:\/\/|https:\/\/|file:\/\/\/)/i.test(i)?e:(n=0===i.indexOf("//")?i:0===i.indexOf("/")?o+i:r+i.replace(/^\.\//,""),"url("+JSON.stringify(n)+")")})}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i,o=function(){function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}}(),d=n(0),r=n(11),a=(i=r)&&i.__esModule?i:{default:i};var s=d.isProd?"prod-https":"qa-https",c=function(){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this._interactionsSent=[],this.experimentName=e,this.globoABClient=(new a.default).ab(s)}return o(t,[{key:"_sendCustom",value:function(e){for(var t=arguments.length,n=Array(1<t?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];var o=n[0],r=n[1],a=n[2],s=n[3],c=n[4],l=n[5],u=n[6];return(0,d.logging)("log","Enviando "+e+" para o experimento "+this.experimentName+" para alternativa "+o,"com testId "+r+" e originURL "+l),this.globoABClient[e]({experiment:this.experimentName,alternative:o,testId:r,context:[{name:"videoId",value:""+u}]},a,c,s)}},{key:"send",value:function(t){try{for(var e=arguments.length,n=Array(1<e?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];this._sendCustom.apply(this,[t].concat(n))}catch(e){(0,d.logging)("error","Falha ao enviar "+t+" para teste AB: "+this.experimentName+"."),(0,d.logging)("error",e)}}},{key:"sendImpression",value:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.send.apply(this,["impression"].concat(t))}},{key:"sendConversion",value:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.send.apply(this,["conversion"].concat(t))}}]),t}();t.default=c,e.exports=t.default},function(e,a,t){"use strict";(function(e){var t,n,i,o,r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};o=function(){return function(n){var i={};function o(e){if(i[e])return i[e].exports;var t=i[e]={i:e,l:!1,exports:{}};return n[e].call(t.exports,t,t.exports,o),t.l=!0,t.exports}return o.m=n,o.c=i,o.i=function(e){return e},o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:n})},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="",o(o.s=16)}([function(e,t,n){var i=function(){function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}}();var o=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return i(e,null,[{key:"isFieldSetted",value:function(e){return void 0!==e&&!1!==e}},{key:"getAbHost",value:function(e){return"local"===e?"http://localhost:8888":"prod-https"===e?"https://ab.g.globo":"prod-http"===e?"http://ab.g.globo":"qa-http"===e?"http://ab.qa.globoi.com":"qa-https"===e?"https://ab.qa.globoi.com":"https://ab.g.globo"}},{key:"getMabHost",value:function(e){return"local"===e?"http://localhost:8888":"prod-https"===e?"https://mab.g.globo":"prod-http"===e?"http://mab.g.globo":"qa-http"===e?"http://mab.qa.globoi.com":"qa-https"===e?"https://mab.qa.globoi.com":"https://mab.g.globo"}},{key:"getMetricsHost",value:function(e){return"local"===e?"http://localhost:8888":"prod-https"===e?"https://sdk-metrics.g.globo":"prod-http"===e?"http://sdk-metrics.g.globo":"qa-http"===e?"http://sdk-metrics.g.globo":"https://sdk-metrics.g.globo"}},{key:"getExtraParams",value:function(){var e={},t=["forced-experiment","forced-alternative"],n=this.getDocumentLocationSearch().substr(1).split("&");for(var i in n)if(n.hasOwnProperty(i)){var o=n[i].split("=");-1<t.indexOf(o[0])&&(e[o[0]]=o[1])}return e}},{key:"getDocumentLocationSearch",value:function(){return document.location.search}},{key:"getEnvironmentInfo",value:function(){var e=navigator.platform,t=navigator.userAgent;return t.match(/Firefox\/([0-9]+\.[0-9]+)/)?"Firefox "+t.match(/Firefox\/([0-9]+\.[0-9]+)/)[1]+" ("+e+")":t.match(/Chrome\/([0-9]+\.[0-9]+)/)?"Chrome "+t.match(/Chrome\/([0-9]+\.[0-9]+)/)[1]+" ("+e+")":t.match(/MSIE ([0-9]+\.[0-9]+)/)?"Internet Explorer "+t.match(/MSIE ([0-9]+\.[0-9]+)/)[1]+" ("+e+")":t.match(/Safari\/([0-9]+\.[0-9]+)/)?"Safari "+t.match(/Safari\/([0-9]+\.[0-9]+)/)[1]+" ("+e+")":t.match(/Opera\/([0-9]+\.[0-9]+)/)?"Opera "+t.match(/Opera\/([0-9]+\.[0-9]+)/)[1]+" ("+e+")":t.match(/Edg\/([0-9]+\.[0-9]+)/)?"Edge "+t.match(/Edg\/([0-9]+\.[0-9]+)/)[1]+" ("+e+")":"Unknown"}}]),e}();e.exports=o},function(e,t){e.exports={name:"globo-ab-sdk",version:"4.3.8",environment:"web",description:"SDK to integrate and interact with experiments from Globo AB Testing platform",main:"lib/globo-ab-sdk.js",directories:{src:"src"},publishConfig:{registry:"https://artifactory.globoi.com/artifactory/api/npm/npm-local"},dependencies:{"globo-ab":"file:../shared/src/globo-ab","globo-mab":"file:../shared/src/globo-mab"},devDependencies:{babel:"^6.23.0","babel-core":"^6.26.0","babel-loader":"^7.1.2","babel-preset-env":"^1.7.0",enzyme:"^3.4.4","enzyme-adapter-react-16":"^1.2.0",eslint:"^4.15.0","eslint-config-google":"^0.9.1","http-server":"^0.11.1",istanbul:"^0.4.5",jasmine:"^2.9.0","jasmine-enzyme":"^6.0.3",jsdom:"^12.0.0",jshint:"^2.9.6",proxyquire:"^1.8.0",sinon:"^4.2.0",webpack:"^2.2.1"},scripts:{test:"jasmine",coverage:"istanbul cover -x **/spec/** node_modules/jasmine/bin/jasmine.js",build:"eslint --fix ./src/* && jasmine && webpack",start:"http-server",tag:"git tag -a 3.2.10 -m '3.2.0'"},repository:{type:"git",url:"gitlab@gitlab.globoi.com:bigdata/experimentation/sdk-web.git"},keywords:["globo-ab"],author:"Bigdata Experimentation Team",license:"ISC"}},function(e,t,n){var i=function(){function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}}();var o=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return i(e,[{key:"oneWaySend",value:function(e,t,n,i,o){this.do(e,t,"POST",null,n,null,null,i,o)}},{key:"do",value:function(e,t,n,i,o,r,a){var s=this,c=7<arguments.length&&void 0!==arguments[7]?arguments[7]:[],l=8<arguments.length&&void 0!==arguments[8]?arguments[8]:1e3,u="";for(var d in i)i.hasOwnProperty(d)&&(u+="&"+d+"="+i[d]);u&&(u="?"+u.substring(1));var f=e+t+u,p=this.createXHR();p.open(n,f,!0),p.timeout=l,p.onload=function(){200<=p.status&&p.status<400?s.callIfDefined(r,p):s.callIfDefined(a,s.handleError(p,f))},p.onerror=function(e){s.callIfDefined(a,s.handleError(e,f))},p.ontimeout=function(e){s.callIfDefined(a,s.handleError(e,f))},o&&(p.setRequestHeader("Content-Type","application/json;charset=utf-8"),o=JSON.stringify(o)),Array.from(c).forEach(function(t){Object.keys(t).forEach(function(e){p.setRequestHeader(e,t[e])})}),p.timeTriggerRequest=performance.now(),p.send(o)}},{key:"handleError",value:function(e,t){var n={};return n.type=e.type?e.type:"undefined",e.target instanceof XMLHttpRequest&&(e=e.target),e instanceof XMLHttpRequest?(n.status=e.status,n.url=t,n.timeout=e.timeout,n.msg=e.responseText):n.msg=e.toString(),n}},{key:"createXHR",value:function(){var e=new XMLHttpRequest;return e.withCredentials=!1,e}},{key:"callIfDefined",value:function(e,t){e&&e(t)}}]),e}();e.exports=o},function(e,t,n){var i=function(){function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}}();var o=function(){function n(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"",t=1<arguments.length&&void 0!==arguments[1]&&arguments[1];!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),this.name=e,this.generateImpression=t}return i(n,[{key:"_canProcessEvent",value:function(){return!(this.data&&this.data["extra-info"]&&this.data["extra-info"]["draw-rule"]&&void 0!==this.data["extra-info"]["draw-rule"]["process-event"])||this.data["extra-info"]["draw-rule"]["process-event"]}},{key:"setName",value:function(e){return this.name=e,this}},{key:"getName",value:function(){return this.name}},{key:"setGenerateImpression",value:function(e){return this.generateImpression=e,this}},{key:"getGenerateImpression",value:function(){return this.generateImpression}}]),n}();e.exports=o},function(e,t,n){var i=function(){function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}}();var o=function(){function t(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this.options=e}return i(t,[{key:"getHeaders",value:function(){return this.options.extraHeaders||[]}},{key:"getHeader",value:function(n){var i="";return this.getHeaders().forEach(function(t){Object.keys(t).forEach(function(e){n===e&&(i=t[e])})}),i}},{key:"getTimeout",value:function(){var e=this.options.timeout;return void 0===e&&(e=1e3),e}},{key:"setTimeout",value:function(e){return this.options.timeout=e,this}},{key:"addHeader",value:function(e){var t=[];return this.options.hasOwnProperty("extraHeaders")&&(t=this.options.extraHeaders),t.push(e),this.options.extraHeaders=t,this}},{key:"addHeaders",value:function(e){var t=[];return this.options.hasOwnProperty("extraHeaders")&&(t=this.options.extraHeaders),e.forEach(function(e){t.push(e)}),this.options.extraHeaders=t,this}},{key:"withOriginURL",value:function(e){return new t(this.clone(this.options)).originURL(e)}},{key:"originURL",value:function(e){return this.addHeader({"x-canonical-uri":e}),this}},{key:"getOriginURL",value:function(){return this.getHeader("x-canonical-uri")}}]),t}();e.exports=o},function(a,e,s){(function(t){var n=function(){function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}}(),i=e(s(15)),o=e(s(2));function e(e){return e&&e.__esModule?e:{default:e}}var r=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.sendBeaconOneWay=new i.default,this.xmlHttp=new o.default}return n(e,[{key:"oneWay",value:function(e,t,n){var i=3<arguments.length&&void 0!==arguments[3]?arguments[3]:[],o=4<arguments.length&&void 0!==arguments[4]?arguments[4]:1e3;this.isBrowserSupportSendBeacon()&&!this.hasHeaders(i)?this.sendBeaconOneWay.send(e,t,n):this.xmlHttp.oneWaySend(e,t,n,i,o)}},{key:"isBrowserSupportSendBeacon",value:function(){return!(void 0===t.navigator||!t.navigator.sendBeacon)}},{key:"hasHeaders",value:function(e){return void 0!==e&&0<e.length}}]),e}();a.exports=r}).call(e,s(6))},function(e,t,n){var i,o="function"==typeof Symbol&&"symbol"===r(Symbol.iterator)?function(e){return void 0===e?"undefined":r(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":void 0===e?"undefined":r(e)};i=function(){return this}();try{i=i||Function("return this")()||(0,eval)("this")}catch(e){"object"===("undefined"==typeof window?"undefined":o(window))&&(i=window)}e.exports=i},function(e,t,n){var i=function(){function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}}(),o=c(n(11)),r=c(n(10)),a=c(n(4)),s=c(n(3));function c(e){return e&&e.__esModule?e:{default:e}}var l=function(){function t(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"prod-https";!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this.abMain=new o.default(e),this._options=new a.default}return i(t,[{key:"createExperiment",value:function(e,t,n){return new r.default(e,t,n)}},{key:"createIsolationGroup",value:function(e,t,n){return new s.default(e,t,n)}},{key:"choose",value:function(e,t,n,i){return console.log("AB - Choose requested by application"),this.abMain.choose(e,t,n,i,this._options)}},{key:"isolationChoose",value:function(e,t,n,i){return console.log("AB - Isolation choose requested by application"),this.abMain.isolationChoose(e,t,n,i,this._options)}},{key:"impression",value:function(e,t,n,i){console.log("AB - Impression requested by application"),this.abMain.impression(e,t,n,i,this._options)}},{key:"conversion",value:function(e,t,n,i){console.log("AB - Conversion requested by application"),this.abMain.conversion(e,t,n,i,this._options)}},{key:"addHeader",value:function(e){return this._options.addHeader(e),this}},{key:"addHeaders",value:function(e){return this._options.addHeaders(e),this}},{key:"getHeaders",value:function(){return this._options.getHeaders()}},{key:"setTimeout",value:function(e){return this._options.setTimeout(e),this}}]),t}();e.exports=l},function(e,t,n){var i=function(){function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}}(),o=s(n(4)),r=s(n(14)),a=s(n(13));function s(e){return e&&e.__esModule?e:{default:e}}var c=function(){function t(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"prod-https";!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this.mabMain=new r.default(e),this._options=new o.default}return i(t,[{key:"createExperiment",value:function(e,t){return new a.default(e,t)}},{key:"choose",value:function(e,t,n,i){return console.log("MAB - Choose requested by application"),this.mabMain.choose(e,t,n,i,this._options)}},{key:"increment",value:function(e,t,n,i){console.log("MAB - Increment requested by application"),this.mabMain.increment(e,t,n,i,this._options)}},{key:"reward",value:function(e,t,n,i){console.log("MAB - Reward requested by application"),this.mabMain.reward(e,t,n,i,this._options)}},{key:"addHeader",value:function(e){return this._options.addHeader(e),this}},{key:"addHeaders",value:function(e){return this._options.addHeaders(e),this}},{key:"getHeaders",value:function(){return this._options.getHeaders()}},{key:"setTimeout",value:function(e){return this._options.setTimeout(e),this}}]),t}();e.exports=c},function(e,t,n){var i=function(){function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}}(),o=a(n(2)),r=a(n(5)),f=a(n(0));function a(e){return e&&e.__esModule?e:{default:e}}var s=function(){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this.abHost=f.default.getAbHost(e),this.metricsHost=f.default.getMetricsHost(e),this.defaultRequest=new o.default,this.requestWrapper=new r.default}return i(t,[{key:"chooseWithContent",value:function(e,t,n,i,o,r,a){var s=f.default.getExtraParams(),c=s["forced-experiment"],l=s["forced-alternative"];for(var u in e)if(e.hasOwnProperty(u)&&e[u].name===c&&l){e[u].forcedAlternative=l;break}var d=Object.assign({},{experiments:e},t?{userId:t}:null,n?{glbExpIdToken:n}:null,i?{hsIdToken:i}:null);this.defaultRequest.do(this.abHost,"/choose","POST",{},d,r,a,o.getHeaders(),o.getTimeout())}},{key:"chooseWithoutContent",value:function(e,t,n,i,o,r,a){var s=f.default.getExtraParams(),c=s["forced-experiment"],l=s["forced-alternative"],u=Object.assign({},{experiments:e},t?{userId:t}:null,n?{glbExpIdToken:n}:null,i?{hsIdToken:i}:null,c?{forcedExperiment:c}:null,l?{forcedAlternative:l}:null);this.defaultRequest.do(this.abHost,"/choose","GET",u,null,r,a,o.getHeaders())}},{key:"isolationChoose",value:function(e,t,n,i,o,r,a){var s=f.default.getExtraParams(),c=s["forced-experiment"],l=s["forced-alternative"],u=Object.assign({},{isolationGroup:e.getName()},e.getGenerateImpression()?{generateImpression:e.getGenerateImpression()}:null,t?{userId:t}:null,n?{glbExpIdToken:n}:null,i?{hsIdToken:i}:null,c?{forcedExperiment:c}:null,l?{forcedAlternative:l}:null);this.defaultRequest.do(this.abHost,"/isolation/choose","GET",u,null,r,a,o.getHeaders())}},{key:"recordMetric",value:function(e,t){this.requestWrapper.oneWay(this.abHost,"/event",e,t.getHeaders(),t.getTimeout())}},{key:"sendPerformanceMetrics",value:function(e){this.requestWrapper.oneWay(this.metricsHost,"/api/v1/performance",e)}}]),t}();e.exports=s},function(e,t,n){var o=function(){function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}}();var i=function(){function i(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"",t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:[],n=2<arguments.length&&void 0!==arguments[2]&&arguments[2];!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),this.name=e,this.context=null!==t?t:[],this.generateImpression=n}return o(i,[{key:"_canProcessEvent",value:function(){return!(this.data&&this.data["extra-info"]&&this.data["extra-info"]["draw-rule"]&&void 0!==this.data["extra-info"]["draw-rule"]["process-event"])||this.data["extra-info"]["draw-rule"]["process-event"]}},{key:"setName",value:function(e){return this.name=e,this}},{key:"getName",value:function(){return this.name}},{key:"setContext",value:function(e){return this.context=null!==e?e:[],this}},{key:"getContext",value:function(){return this.context}},{key:"setGenerateImpression",value:function(e){return this.generateImpression=e,this}},{key:"getGenerateImpression",value:function(){return this.generateImpression}}]),i}();e.exports=i},function(e,t,n){var i=function(){function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}}(),o=r(n(9)),l=r(n(0));r(n(3));function r(e){return e&&e.__esModule?e:{default:e}}var u=n(1),a=function(){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this.abEndpoint=new o.default(e),this.blacklist=[]}return i(t,[{key:"choose",value:function(e,t,n,i,o){return Array.isArray(e)&&0<e.length?e.some(function(e){return null!==e.getContext()&&0<e.getContext().length||l.default.isFieldSetted(e.getGenerateImpression())})?this._chooseWithContent(e,t,n,i,o):this._chooseWithoutContent(e,t,n,i,o):Promise.reject(new TypeError("The experiment parameter must be a list of Experiment objects."))}},{key:"isolationChoose",value:function(e,t,n,i,o){return e?this._isolationChoose(e,t,n,i,o):Promise.reject(new TypeError("The isolationGroup parameter must be a IsolationGroup object."))}},{key:"impression",value:function(e,t,n,i,o){e.event="impression",this.blacklist&&this.blacklist.includes(e.experiment)?console.warn("Event "+e.event+" cannot be sent. Check if the experiment is inactive, forced or finished."):(t&&(e.userId=t),n&&(e.glbExpIdToken=n),i&&(e.hsIdToken=i),this.abEndpoint.recordMetric(e,o))}},{key:"conversion",value:function(e,t,n,i,o){e.event="conversion",this.blacklist&&this.blacklist.includes(e.experiment)?console.warn("Event "+e.event+" cannot be sent. Check if the experiment is inactive, forced or finished."):(t&&(e.userId=t),n&&(e.glbExpIdToken=n),i&&(e.hsIdToken=i),this.abEndpoint.recordMetric(e,o))}},{key:"_chooseWithoutContent",value:function(e,n,o,r,a){var s=this,c=e.map(function(e){return e.name}).join(",");return new Promise(function(i,t){s.abEndpoint.chooseWithoutContent(c,n,o,r,a,function(e){var t=performance.now(),n=s._parseRequest(e,t);i(n),setTimeout(function(){var e=n.experiments.map(function(e){return{testId:e.testId,name:e.name}}),t={latency:n.latency,experiments:e,platform:l.default.getEnvironmentInfo(),sdk:u.environment,timestamp:Math.floor(Date.now()/1e3),version:u.version,statusCode:n.statusCode};s.abEndpoint.sendPerformanceMetrics(t)},250)},function(e){t(e)})})}},{key:"_chooseWithContent",value:function(e,n,o,r,a){var s=this;return new Promise(function(i,t){s.abEndpoint.chooseWithContent(e,n,o,r,a,function(e){var t=performance.now(),n=s._parseRequest(e,t);i(n),setTimeout(function(){var e=n.experiments.map(function(e){return{testId:e.testId,name:e.name}}),t={latency:n.latency,experiments:e,platform:l.default.getEnvironmentInfo(),sdk:u.environment,timestamp:Math.floor(Date.now()/1e3),version:u.version,statusCode:n.statusCode};s.abEndpoint.sendPerformanceMetrics(t)},250)},function(e){t(e)})})}},{key:"_isolationChoose",value:function(e,n,o,r,a){var s=this;return new Promise(function(i,t){s.abEndpoint.isolationChoose(e,n,o,r,a,function(e){var t=performance.now(),n=s._parseRequest(e,t);i(n),setTimeout(function(){var e=n.experiments.map(function(e){return{testId:e.testId,name:e.name}}),t={latency:n.latency,experiments:e,platform:l.default.getEnvironmentInfo(),sdk:u.environment,timestamp:Math.floor(Date.now()/1e3),version:u.version,statusCode:n.statusCode};s.abEndpoint.sendPerformanceMetrics(t)},250)},function(e){t(e)})})}},{key:"_parseRequest",value:function(e,t){var n=JSON.parse(e.responseText);n.latency=parseFloat((t-e.timeTriggerRequest).toFixed(1)),n.statusCode=e.status;var i=n.experiments;this.blacklist=[];for(var o=0;o<i.length;o++){var r=i[o];r["extra-info"]&&(!1===r["extra-info"]["draw-rule"]["process-event"]&&this.blacklist.push(r.name),delete r["extra-info"])}return n}}]),t}();e.exports=a},function(e,t,n){var i=function(){function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}}(),o=s(n(2)),r=s(n(5)),a=s(n(0));function s(e){return e&&e.__esModule?e:{default:e}}var c=function(){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this.mabHost=a.default.getMabHost(e),this.metricsHost=a.default.getMetricsHost(e),this.defaultRequest=new o.default,this.requestWrapper=new r.default}return i(t,[{key:"chooseWithoutContent",value:function(e,t,n,i,o,r,a){var s=Object.assign({},{experiments:e},t?{userId:t}:null,n?{glbExpIdToken:n}:null,i?{hsIdToken:i}:null);this.defaultRequest.do(this.mabHost,"/choose","GET",s,null,r,a,o.getHeaders(),o.getTimeout())}},{key:"recordMetric",value:function(e,t){this.defaultRequest.do(this.mabHost,"/event","POST",{},e,null,null,t.getHeaders(),t.getTimeout())}},{key:"sendPerformanceMetrics",value:function(e){this.requestWrapper.oneWay(this.metricsHost,"/api/v1/performance",e)}}]),t}();e.exports=c},function(e,t,n){var i=function(){function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}}();var o=function(){function n(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"",t=1<arguments.length&&void 0!==arguments[1]&&arguments[1];!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),this.name=e,this.generateImpression=t}return i(n,[{key:"increment",value:function(){var e=this.arms;0===e.length&&(e=[{slot:0,name:this.arm}]),this._sendMetric("increment",e)}},{key:"reward",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"",n=[{slot:e,name:""===t?this.arm:t}];this._sendMetric("reward",n)}},{key:"_sendMetric",value:function(e,t){var n={experiment:this.experiment,arm:this.arm,testId:this.testId,abAlternative:this.abAlternative,arms:t};this._recordMetric(e,n)}},{key:"_recordMetric",value:function(e,t){this.context.mabEndpoint.recordMABMetric(e,t,this.options)}},{key:"setGenerateImpression",value:function(e){return this.generateImpression=e,this}},{key:"getGenerateImpression",value:function(){return this.generateImpression}}],[{key:"parseRequest",value:function(e,t){var n=JSON.parse(e);return n.glbExpIdToken&&t.glbExpIdToken(n.glbExpIdToken),n}}]),n}();e.exports=o},function(e,t,n){var i=function(){function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}}(),o=r(n(12)),l=r(n(0));function r(e){return e&&e.__esModule?e:{default:e}}var u=n(1),a=function(){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this.mabEndpoint=new o.default(e)}return i(t,[{key:"increment",value:function(e,t,n,i,o){e.event="increment",t&&(e.userId=t),n&&(e.glbExpIdToken=n),i&&(e.hsIdToken=i),this.mabEndpoint.recordMetric(e,o)}},{key:"reward",value:function(e,t,n,i,o){e.event="reward",t&&(e.userId=t),n&&(e.glbExpIdToken=n),i&&(e.hsIdToken=i),this.mabEndpoint.recordMetric(e,o)}},{key:"choose",value:function(e,t,n,i,o){return Array.isArray(e)&&0<e.length?this._chooseWithoutContent(e,t,n,i,o):Promise.reject(new TypeError("The experiment parameter must be a list of Experiment objects."))}},{key:"_chooseWithoutContent",value:function(e,n,o,r,a){var s=this,c=e.map(function(e){return e.name}).join(",");return new Promise(function(i,t){s.mabEndpoint.chooseWithoutContent(c,n,o,r,a,function(e){var t=performance.now(),n=s._parseRequest(e,t);i(n),setTimeout(function(){var e=n.experiments.map(function(e){return{testId:e.testId,name:e.name}}),t={latency:n.latency,experiments:e,platform:l.default.getEnvironmentInfo(),sdk:u.environment,timestamp:Math.floor(Date.now()/1e3),version:u.version,statusCode:n.statusCode};s.mabEndpoint.sendPerformanceMetrics(t)},250)},function(e){t(e)})})}},{key:"_chooseWithContent",value:function(e,n,o,r,a){var s=this;return new Promise(function(i,t){s.mabEndpoint.chooseWithContent(e,n,o,r,a,function(e){var t=performance.now(),n=s._parseRequest(e,t);i(n),setTimeout(function(){var e=n.experiments.map(function(e){return{testId:e.testId,name:e.name}}),t={latency:n.latency,experiments:e,platform:l.default.getEnvironmentInfo(),sdk:u.environment,timestamp:Math.floor(Date.now()/1e3),version:u.version,statusCode:n.statusCode};s.mabEndpoint.sendPerformanceMetrics(t)},250)},function(e){t(e)})})}},{key:"_parseRequest",value:function(e,t){var n=JSON.parse(e.responseText);return n.latency=parseFloat((t-e.timeTriggerRequest).toFixed(1)),n.statusCode=e.status,n}}]),t}();e.exports=a},function(n,e,t){(function(o){var t=function(){function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}}();var e=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return t(e,[{key:"send",value:function(e,t,n){var i=new Blob([JSON.stringify(n)],{type:"application/json"});o.navigator.sendBeacon(e+t,i)}}]),e}();n.exports=e}).call(e,t(6))},function(e,t,n){var i=function(){function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}}(),o=a(n(7)),r=a(n(8));function a(e){return e&&e.__esModule?e:{default:e}}var s=n(1),c=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return i(e,[{key:"ab",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"prod";return new o.default(e)}},{key:"mab",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"prod";return new r.default(e)}},{key:"getVersion",value:function(){return s.version}}]),e}();e.exports=c}])},"object"===r(a)&&"object"===r(e)?e.exports=o():(n=[],void 0===(i="function"==typeof(t=o)?t.apply(a,n):t)||(e.exports=i))}).call(this,t(12)(e))},function(e,t,n){"use strict";e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i,o=function(){function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}}(),r=n(0),a=n(1),s=(i=a)&&i.__esModule?i:{default:i};var c=function(){function i(e,t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),this.uniqueId=t,this.playerElement=e,this.videoIds=[],this.videoId=n,this.element=(0,r.createElement)("video-rec-cancel-screen"),this.element.innerHTML=this.template(),this.playerElement.appendChild(this.element),this.listElement=this.element.getElementsByClassName("video-rec-cancel-screen__video-list")[0],this.replayCallback=function(){},this.clickCallback=function(e){return e},(0,r.delegate)(this.playerElement,"click","replay-"+this.uniqueId,this.handleReplay.bind(this)),(0,r.delegate)(this.playerElement,"click","video-"+this.uniqueId,this.handleClick.bind(this))}return o(i,[{key:"open",value:function(){this.playerElement.classList.add("video-rec-cancel-screen--enabled"),this.element.classList.add("video-rec-cancel-screen--active"),s.default.sendRecommendationScreenImpression(this.videoIds,(0,r.getBlockPosition)(this.videoId),this.videoId)}},{key:"close",value:function(){this.playerElement.classList.remove("video-rec-cancel-screen--enabled"),this.element.classList.remove("video-rec-cancel-screen--active")}},{key:"updateVideos",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[];this.videoIds=e.map(function(e){return e.content.video.id}),this.listElement.innerHTML=e.map(this.renderVideo.bind(this)).join("")}},{key:"onReplay",value:function(e){this.replayCallback=e}},{key:"onClick",value:function(e){this.clickCallback=e}},{key:"handleReplay",value:function(){this.close(),this.replayCallback()}},{key:"handleClick",value:function(e){var t=parseInt(e.getAttribute("data-index"),10)+1,n=parseInt(e.getAttribute("data-video-id")),i=e.getAttribute("data-video-title");this.clickCallback(n,i);var o=parseInt(this.playerElement.parentElement.WMPlayer.container.volume);s.default.sendRecommendationClick(t,n,o),this.close()}},{key:"renderVideo",value:function(e,t){return'\n      <section data-index="'+t+'" class="video-'+this.uniqueId+'"\n      data-video-id="'+e.content.video.id+'"\n      data-video-title="'+e.content.title+'">\n        <div class="thumb-container">\n          <picture class="thumb-container__picture">\n            <source media="(min-width: 620px)" srcset="'+e.content.image.sizes.S.url+'">\n            <img src="'+e.content.image.sizes.S.url+'" />\n          </picture>\n          <span class="thumb-container__duration">'+(0,r.parseMilliseconds)(e.content.video.duration)+'</span>\n          <svg class="thumb-container__play" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">\n            <g fill="none" fill-rule="evenodd">\n              <path d="M0 0h24v24H0z"></path>\n              <path d="M8 6.267c0-.661.468-.931 1.04-.601l9.93 5.733c.573.33.573.871 0 1.202l-9.93 5.733c-.572.33-1.04.06-1.04-.6V6.266z" fill="#FFF"></path>\n            </g>\n          </svg>\n        </div>\n        <div class="info-container">\n          <span class="info-container__chapeu">'+e.content.section+'</span>\n          <span class="info-container__title">'+e.content.title+"<span>\n        </div>\n      </section>\n    "}},{key:"template",value:function(){return'\n      <span class="video-rec-cancel-screen__title">Assista também</span>\n      <div class="video-rec-cancel-screen__video-list"></div>\n      <button class="video-rec-cancel-screen__replay replay-'+this.uniqueId+'" type="button">\n        <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 22 22">\n          <path d="M0 0h24v24H0z" fill="none"/>\n          <path d="M12 5V1L7 6l5 5V7c3.31 0 6 2.69 6 6s-2.69 6-6 6-6-2.69-6-6H4c0 4.42 3.58 8 8 8s8-3.58 8-8-3.58-8-8-8z"/>\n        </svg>\n        Reveja\n      </button>\n    '}}]),i}();t.default=c,e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}}();var o=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.client=null}return i(e,[{key:"setHorizonClient",value:function(){var t=this;setTimeout(function(){if(window.HorizonClient)return window.HorizonClient.then(function(e){return t.client=e});t.setHorizonClient()},100)}},{key:"send",value:function(e){this.client&&this.client.send(Object.assign(e))}},{key:"commonEvent",value:function(e){var t=e.eventCategory,n=e.eventAction,i=e.eventLabel,o=e.eventValue,r=e.eventProperty;this.send({id:"common-event",version:"0.1",contentType:"common",properties:{eventCategory:t,eventAction:n,eventLabel:i,eventValue:o,eventProperty:r}})}}]),e}();t.default=o,e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}}(),r=n(2),a=n(0);var i=function(){function i(e){var t=e.endpoint,n=e.videoId;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),this.endpoint=t,this.endpointData=[],this.currentConfig={},this.onErrorCallback=function(){},this.videoId=n}return o(i,[{key:"_getEndpoint",value:function(){var e=this.endpoint+"?responseFormat=legacyPublishing";return this.videoId&&(e+="&anchors.item=video:"+this.videoId),Promise.resolve(e)}},{key:"_requestData",value:function(){var t=this;return this._getEndpoint().then(function(e){return(0,a.ajax)({url:e}).catch(function(e){return(0,a.logging)("error","Falha ao requisitar vídeos recomendados."),Promise.reject(e)}).then(function(e){return t.endpointData=JSON.parse(e),Promise.resolve(t.endpointData)})})}},{key:"_getSessionStorage",value:function(e){if(window.sessionStorage){var t=window.sessionStorage.getItem(r.PLUGIN_KEYNAME+"--"+e);if(!t)return null;try{return JSON.parse(t)}catch(e){return{error:e}}}}},{key:"_setSessionStorage",value:function(e,t){if(window.sessionStorage){var n="string"==typeof e?e:JSON.stringify(e);return window.sessionStorage.setItem(r.PLUGIN_KEYNAME+"--"+t,n),e}}},{key:"_filterSeenVideos",value:function(e){var t=this.getSeenVideos();return t.length<=0?e:e.filter(function(e){return t.indexOf(e.content.video.id)<0})}},{key:"onError",value:function(e){"function"==typeof e&&(this.onErrorCallback=e)}},{key:"getSeenVideos",value:function(){return this._getSessionStorage(r.SEEN_VIDEOS_STORAGE_KEY)||[]}},{key:"getVideos",value:function(){var t=this,n=0<arguments.length&&void 0!==arguments[0]?arguments[0]:3;return this._requestData().then(function(e){return t._filterSeenVideos(e)}).then(function(e){return e.length>=n?Promise.resolve(e.slice(0,n)):((0,a.logging)("warn","Todos os vídeos foram vistos."),Promise.reject())}).catch(function(e){return e instanceof Error&&(0,a.logging)("error",e),Promise.reject(t.onErrorCallback())})}},{key:"updateSeenVideos",value:function(e){var t=this.getSeenVideos();return e&&t.indexOf(e)<0&&t.push(e),this._setSessionStorage(t,r.SEEN_VIDEOS_STORAGE_KEY)}}]),i}();t.default=i,e.exports=t.default}]);